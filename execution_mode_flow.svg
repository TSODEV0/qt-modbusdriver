<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 16px Arial; fill: #2c3e50; }
      .box { fill: #ecf0f1; stroke: #34495e; stroke-width: 2; rx: 5; }
      .decision { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .process { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 5; }
      .database { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; rx: 5; }
      .service { fill: #27ae60; stroke: #229954; stroke-width: 2; rx: 5; }
      .text { font: 12px Arial; fill: #2c3e50; text-anchor: middle; }
      .small-text { font: 10px Arial; fill: #2c3e50; text-anchor: middle; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="25" class="title">SCADA Service Test: --single vs --multiple Execution Flow</text>
  
  <!-- Start -->
  <rect x="350" y="50" width="100" height="40" class="box" />
  <text x="400" y="75" class="text">Start Application</text>
  
  <!-- Command Line Parsing -->
  <polygon points="320,120 400,100 480,120 400,140" class="decision" />
  <text x="400" y="125" class="text">Parse Args</text>
  
  <!-- Single Mode Branch -->
  <rect x="150" y="180" width="120" height="40" class="process" />
  <text x="210" y="200" class="text">--single mode</text>
  <text x="210" y="215" class="small-text">executionMode = "single"</text>
  
  <!-- Multiple Mode Branch -->
  <rect x="530" y="180" width="120" height="40" class="process" />
  <text x="590" y="200" class="text">--multiple mode</text>
  <text x="590" y="215" class="small-text">executionMode = "multiple"</text>
  
  <!-- Database Manager -->
  <rect x="320" y="260" width="160" height="40" class="database" />
  <text x="400" y="285" class="text">DatabaseManager.setExecutionMode()</text>
  
  <!-- Device Loading - Single -->
  <rect x="100" y="340" width="140" height="60" class="database" />
  <text x="170" y="365" class="text">Load Devices</text>
  <text x="170" y="380" class="small-text">SQL: device_id IN (2)</text>
  <text x="170" y="395" class="small-text">Result: 1 device</text>
  
  <!-- Device Loading - Multiple -->
  <rect x="560" y="340" width="140" height="60" class="database" />
  <text x="630" y="365" class="text">Load Devices</text>
  <text x="630" y="380" class="small-text">SQL: device_id IN (2,3)</text>
  <text x="630" y="395" class="small-text">Result: 2 devices</text>
  
  <!-- Data Points Loading -->
  <rect x="320" y="340" width="160" height="60" class="database" />
  <text x="400" y="365" class="text">Load Data Points</text>
  <text x="400" y="380" class="small-text">Filter by selected devices</text>
  <text x="400" y="395" class="small-text">JOIN with device table</text>
  
  <!-- Service Configuration - Single -->
  <rect x="100" y="440" width="140" height="60" class="service" />
  <text x="170" y="465" class="text">SCADA Service</text>
  <text x="170" y="480" class="small-text">Single-threaded mode</text>
  <text x="170" y="495" class="small-text">1 ModbusManager</text>
  
  <!-- Service Configuration - Multiple -->
  <rect x="560" y="440" width="140" height="60" class="service" />
  <text x="630" y="465" class="text">SCADA Service</text>
  <text x="630" y="480" class="small-text">Multi-threaded mode</text>
  <text x="630" y="495" class="small-text">Multiple workers</text>
  
  <!-- Final Result -->
  <rect x="320" y="540" width="160" height="40" class="box" />
  <text x="400" y="565" class="text">Start Data Acquisition</text>
  
  <!-- Arrows -->
  <line x1="400" y1="90" x2="400" y2="100" class="arrow" />
  
  <!-- From decision to branches -->
  <line x1="360" y1="130" x2="210" y2="180" class="arrow" />
  <line x1="440" y1="130" x2="590" y2="180" class="arrow" />
  
  <!-- From branches to database -->
  <line x1="210" y1="220" x2="210" y2="240" class="arrow" />
  <line x1="210" y1="240" x2="380" y2="260" class="arrow" />
  <line x1="590" y1="220" x2="590" y2="240" class="arrow" />
  <line x1="590" y1="240" x2="420" y2="260" class="arrow" />
  
  <!-- From database to device loading -->
  <line x1="350" y1="300" x2="170" y2="340" class="arrow" />
  <line x1="450" y1="300" x2="630" y2="340" class="arrow" />
  
  <!-- From device loading to service -->
  <line x1="170" y1="400" x2="170" y2="440" class="arrow" />
  <line x1="630" y1="400" x2="630" y2="440" class="arrow" />
  
  <!-- From service to final -->
  <line x1="170" y1="500" x2="170" y2="520" class="arrow" />
  <line x1="170" y1="520" x2="380" y2="540" class="arrow" />
  <line x1="630" y1="500" x2="630" y2="520" class="arrow" />
  <line x1="630" y1="520" x2="420" y2="540" class="arrow" />
  
  <!-- Labels for branches -->
  <text x="280" y="155" class="small-text">--single</text>
  <text x="520" y="155" class="small-text">--multiple</text>
  
</svg>